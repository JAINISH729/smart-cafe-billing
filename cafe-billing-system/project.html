<!DOCTYPE html>
<html>

<head>
  <title>Smart Caf√© Billing System</title>
</head>

<body>
  <h1>Smart Caf√© Billing System</h1>
  <div id="output"></div>

  <script>
    var password = "1234";

    // Billing variables
    var subtotal = 0;
    var gst = 0;
    var grandTotal = 0;
    var totalItems = 0;

    var highestPrice = 0;
    var lowestPrice = 0;
    var firstItemOrdered = true;

    var discountAmount = 0;
    var finalBill = 0;

    var choice;

    do {
      choice = prompt(
        "Smart Caf√© Menu\n" +
        "1. Place Order\n" +
        "2. View Bill\n" +
        "3. Apply Discount\n" +
        "4. Change Caf√© Password\n" +
        "5. View Caf√© Report\n" +
        "0. Exit\n\n" +
        "Enter your choice:"
      );

      if (choice == "1") {
        var itemChoice;
        do {
          itemChoice = prompt(
            "üçΩ Caf√© Menu\n" +
            "1. Coffee (‚Çπ50)\n" +
            "2. Tea (‚Çπ30)\n" +
            "3. Sandwich (‚Çπ80)\n" +
            "4. Pastry (‚Çπ100)\n" +
            "0. Finish Order\n\n" +
            "Enter your choice:"
          );

          var price = 0;
          var itemName = "";

          if (itemChoice == "1") {
            price = 50;
            itemName = "Coffee";
          } else if (itemChoice == "2") {
            price = 30;
            itemName = "Tea";
          } else if (itemChoice == "3") {
            price = 80;
            itemName = "Sandwich";
          } else if (itemChoice == "4") {
            price = 100;
            itemName = "Pastry";
          } else if (itemChoice == "0") {
            // Exit order menu
          } else {
            alert("Invalid choice!");
          }

          if (price > 0) {
            subtotal = subtotal + price;
            totalItems = totalItems + 1;

            if (firstItemOrdered) {
              highestPrice = price;
              lowestPrice = price;
              firstItemOrdered = false;
            } else {
              if (price > highestPrice) {
                highestPrice = price;
              }
              if (price < lowestPrice) {
                lowestPrice = price;
              }
            }

            console.log("You ordered " + itemName + ". Price: ‚Çπ" + price + "  Current Total: ‚Çπ" + subtotal);
            document.getElementById("output").innerHTML +=
              "You ordered " + itemName + ". Price: ‚Çπ" + price + " Current Total: ‚Çπ" + subtotal + "<br>";
          }

        } while (itemChoice != "0");

      } else if (choice == "2") {
        gst = subtotal * 0.05;
        grandTotal = subtotal + gst;

        console.log("Subtotal: ‚Çπ" + subtotal);
        console.log("GST (5%): ‚Çπ" + gst);
        console.log("Grand Total: ‚Çπ" + grandTotal);

        document.getElementById("output").innerHTML +=
          "<b>Subtotal:</b> ‚Çπ" + subtotal + "<br>" +
          "<b>GST (5%):</b> ‚Çπ" + gst + "<br>" +
          "<b>Grand Total:</b> ‚Çπ" + grandTotal + "<br><br>";

      } else if (choice == "3") {
        discountAmount = 0;
        if (subtotal > 600) {
          discountAmount = subtotal * 0.20;
        } else if (subtotal > 300) {
          discountAmount = subtotal * 0.10;
        } else {
          discountAmount = 0;
        }

        finalBill = subtotal - discountAmount + gst;

        console.log("Original: ‚Çπ" + subtotal);
        console.log("Discount: ‚Çπ" + discountAmount);
        console.log("Final: ‚Çπ" + finalBill);

        document.getElementById("output").innerHTML +=
          "<b>Original:</b> ‚Çπ" + subtotal + "<br>" +
          "<b>Discount:</b> ‚Çπ" + discountAmount + "<br>" +
          "<b>Final:</b> ‚Çπ" + finalBill + "<br><br>";

      } else if (choice == "4") {
        var oldPass = prompt("Enter old password:");
        if (oldPass == password) {
          var newPass = prompt("Enter new password:");
          password = newPass;
          console.log("Password changed successfully.");
          document.getElementById("output").innerHTML += "Password changed successfully.<br>";
        } else {
          console.log("Incorrect old password.");
          document.getElementById("output").innerHTML += "Incorrect old password.<br>";
        }

      } else if (choice == "5") {
        var averagePrice = 0;
        if (totalItems > 0) {
          averagePrice = subtotal / totalItems;
        }

        console.log("Total Items Sold: " + totalItems);
        console.log("Highest Price Item: ‚Çπ" + highestPrice);
        console.log("Lowest Price Item: ‚Çπ" + lowestPrice);
        console.log("Average Price: ‚Çπ" + averagePrice);

        document.getElementById("output").innerHTML +=
          "<b>Total Items Sold:</b> " + totalItems + "<br>" +
          "<b>Highest Price Item:</b> ‚Çπ" + highestPrice + "<br>" +
          "<b>Lowest Price Item:</b> ‚Çπ" + lowestPrice + "<br>" +
          "<b>Average Price:</b> ‚Çπ" + averagePrice.toFixed(2) + "<br><br>";

      } else if (choice == "0") {
        console.log("Exited Caf√© System.");
        document.getElementById("output").innerHTML += "Exited Caf√© System.<br>";
      } else {
        alert("Invalid choice!");
      }

    } while (choice != "0");
  </script>

</body>

</html>